jQuery(document).ready(function(){!function(a){if(a("#BorlabsCookie").length){var t;a(document).off(".button.data-api"),a(document).on("click","[data-toggle='button']",function(){a(this).hasClass("active")?(this.setAttribute("aria-pressed",!1),a(this).removeClass("active")):(this.setAttribute("aria-pressed",!0),a(this).addClass("active"))}),a("#BorlabsCookie [data-toggle='tooltip']").borlabsBootstrapTooltip({container:"#BorlabsCookie",html:!0}),function(){"use strict";window.addEventListener("load",function(){var t=document.getElementsByClassName("needs-validation"),e=Array.prototype.filter.call(t,function(t){t.addEventListener("submit",function(e){!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation(),void 0!==a(":invalid")[1]&&a("html, body").animate({scrollTop:a(a(":invalid")[1]).parent().offset().top-a(a(":invalid")[1]).parent()[0].offsetHeight},1e3)),t.classList.add("was-validated")},!1)})},!1)}(),a("#BorlabsCookie .color-field").wpColorPicker(),a("#BorlabsCookie [data-media-picker]").on("click",function(e){e.preventDefault();var o=this;t&&t.off("select"),(t=wp.media({title:o.dataset.mediaTitle,button:{text:o.dataset.mediaButton},library:{type:["image"]},multiple:!1})).on("select",function(){var e=t.state().get("selection").first().toJSON();a("#"+o.dataset.mediaPreview).html("<img src='"+e.url+'\' alt="">'),a("#"+o.dataset.mediaPicker).val(e.url)}),t.open()}),a("#BorlabsCookie [data-media-clear]").on("click",function(t){t.preventDefault();var e=this;a("#"+this.dataset.mediaPreview).html(""),a("#"+this.dataset.mediaClear).val("")}),a("#BorlabsCookie [data-switch-target]").on("click",function(){if(a(this).hasClass("active")?a("#"+this.dataset.switchTarget).val("0"):a("#"+this.dataset.switchTarget).val("1"),void 0!==this.dataset.disable)for(var t=this.dataset.disable.split(","),e=!1===a(this).hasClass("active")&&"true"===this.dataset.disableOn||!0===a(this).hasClass("active")&&"false"===this.dataset.disableOn,o=0;o<t.length;o++)a("#"+t[o]).attr("disabled",e)}),a("#BorlabsCookie [data-enable-target]").on("click",function(){this.checked?a("#"+this.dataset.enableTarget).attr("disabled",!1):a("#"+this.dataset.enableTarget).attr("disabled",!0)}),a("#BorlabsCookie [data-disable-target]").on("click",function(){this.checked?a("#"+this.dataset.disableTarget).attr("disabled",!0):a("#"+this.dataset.disableTarget).attr("disabled",!1)}),a("#borlabsModalDelete").on("show.bs.modal",function(t){a("body").css("overflow","auto"),a("#BorlabsCookie .container-fluid").css("filter","blur(2px)");for(var e=[],o=a(t.relatedTarget).closest("table").find("thead tr").children(":not([data-modal-ignore])"),i=a(t.relatedTarget).closest("tr").children(":not([data-modal-ignore])"),s=0;s<i.length;s++)e.push("<strong>"+o[s].innerHTML+"</strong>: "+i[s].innerHTML);a(this).find(".modal-body").html(e.join("<br>")),a(this).find("[data-confirm]")[0].href=t.relatedTarget.dataset.href}),a("#borlabsModalDelete").on("hide.bs.modal",function(t){a("body").css("overflow",""),a("#BorlabsCookie .container-fluid").css("filter","blur(0px)")}),a("#BorlabsCookie [data-clipboard]").on("click",function(){var t=this,e=!1,o=!1;a(this).addClass("clipboard-copied"),a("#"+this.dataset.clipboard)[0].disabled&&(e=!0),"none"===a("#"+this.dataset.clipboard)[0].style.display&&(o=!0),e&&a("#"+this.dataset.clipboard).attr("disabled",!1),o&&(a("#"+this.dataset.clipboard)[0].style.display="block"),a("#"+this.dataset.clipboard).select(),document.execCommand("copy"),e&&a("#"+this.dataset.clipboard).attr("disabled",!0),o&&(a("#"+this.dataset.clipboard)[0].style.display="none"),window.setTimeout(function(){a(t).removeClass("clipboard-copied")},1e3)}),a("#BorlabsCookie [data-clipboard-universal]").on("click",function(){var t=this;a(t).addClass("clipboard-copied"),a("<input>").attr({name:"brlbs-clipboard-helper",type:"text",value:t.innerHTML}).appendTo(t),a("input[name='brlbs-clipboard-helper']").select(),document.execCommand("copy"),a("input[name='brlbs-clipboard-helper']").remove(),t.dataset.clipboardUniversal&&a("#"+t.dataset.clipboardUniversal).val(t.innerHTML),window.setTimeout(function(){a(t).removeClass("clipboard-copied")},1e3)}),a("#BorlabsCookie [data-add-page-source]").on("click",function(){var t=this,e=a(this).find("i");a(e).addClass("fa-circle-notch fa-spin"),a(e).removeClass("fa-eye-slash"),a.ajax(ajaxurl,{type:"POST",data:{action:"borlabs_cookie_handler",type:"get_page",pageId:a("#"+t.dataset.addPageSource+" option:selected").val(),_ajax_nonce:borlabsCookieAdmin.ajax_nonce}}).done(function(o){if(void 0!==(o=a.parseJSON(o)).permalink){var i=a("#"+t.dataset.addPageTarget).val();o.permalink.length&&a("#"+t.dataset.addPageTarget).val(i+(i.length?"\n":"")+o.permalink)}a(e).addClass("fa-eye-slash"),a(e).removeClass("fa-circle-notch fa-spin")})});var e=function(t,e){a("#"+e).attr("class",a("option:selected",a("#"+t)).val()+" animated");var o="#"+e;window.setTimeout(function(){a(o).removeAttr("class")},1500)};a("#BorlabsCookie [data-animation]").on("change",function(){e(this.id,this.dataset.animation)}),a("#BorlabsCookie [data-repeat-animation]").on("click",function(){e(this.dataset.repeatAnimation,a("#"+this.dataset.repeatAnimation)[0].dataset.animation)});var o=function(){a.ajax(ajaxurl,{type:"POST",data:{action:"borlabs_cookie_handler",type:"consent_history",language:a("#borlabsCookieUID")[0].dataset.borlabsCookieLanguage,uid:a("#borlabsCookieUID").val()}}).done(function(t){t.length?(t=a.parseJSON(t),a("[data-borlabs-cookie-result] table tbody").empty(),a.each(t,function(t,e){a("[data-borlabs-cookie-result] table tbody").append("<tr><td>"+e.stamp+'</td><td class="text-center">'+e.version+"</td><td>"+e.consent+"</td></tr>")}),a("[data-borlabs-cookie-consent-history] [data-borlabs-cookie-loading]").slideUp(function(){a("[data-borlabs-cookie-result]").slideDown()})):a("[data-borlabs-cookie-consent-history] [data-borlabs-cookie-loading]").slideUp(function(){a("[data-borlabs-cookie-no-result]").slideDown()})})};if(a("#BorlabsCookie [data-get-consent-history]").on("click",function(){a("[data-borlabs-cookie-no-result]").slideUp(),a("[data-borlabs-cookie-result]").slideUp(function(){a("[data-borlabs-cookie-consent-history] [data-borlabs-cookie-loading]").slideDown(function(){o()})})}),a("[data-clean-up-consent-logs]").on("click",function(){a("[data-total-consents] [data-borlabs-cookie-loading]").fadeIn(function(){a.ajax(ajaxurl,{type:"POST",data:{action:"borlabs_cookie_handler",type:"clean_up",_ajax_nonce:borlabsCookieAdmin.ajax_nonce_clean_up}}).done(function(t){a("[data-total-consents] [data-borlabs-cookie-loading]").fadeOut(function(){t.length&&(t=a.parseJSON(t),a("[data-total-consent-log-details]").html(t.total+" / "+t.size+" MiB"))})})})}),a("[data-borlabs-cookie-scan-complete]").length){var i=function(t){a.ajax(ajaxurl,{type:"POST",data:{action:"borlabs_cookie_handler",type:"scan_javascripts",scanURL:a("input[name='scanURL']").val(),searchPhrases:a("input[name='searchPhrases']").val(),getScanResults:t,_ajax_nonce:borlabsCookieAdmin.ajax_nonce_scan_javascripts}}).done(function(t){!0===(t=a.parseJSON(t)).success?(a("[data-borlabs-cookie-loading]").slideUp(),a("[data-borlabs-cookie-scan-error]").slideUp(),a("[data-borlabs-cookie-scan-complete]").slideDown()):(!1===t.success&&void 0!==t.scanURLManually&&(a("[data-borlabs-cookie-scan-error] a")[0].href=t.scanURLManually,a("[data-borlabs-cookie-scan-error]").slideDown()),i(!0))})};i(!1)}a("input[name^='blockPhrases[']").length&&(a(document).on("click","[data-switch-block-phrase]",function(){var t=/([0-9]{1,})/.exec(this.dataset.switchTarget)[0];"object"==typeof a("#blockPhrase-"+t)?a(this).hasClass("active")?(a("#blockPhrase-"+t)[0].disabled=!1,a("#blockPhrase-"+t)[0].required=!0):(a("#blockPhrase-"+t)[0].disabled=!0,a("#blockPhrase-"+t)[0].required=!1,a("#blockPhrase-"+t).removeClass("is-valid"),a("#blockPhrase-"+t).removeClass("is-invalid")):console.log("Error blockPhrases handling")}),a(document).on("keyup","input[name^='blockPhrases[']",function(){var t=/([0-9]{1,})/.exec(this.id)[0];a("#BorlabsCookieForm").removeClass("was-validated"),this.value.length&&"1"===a("input[name='blockScriptTags["+t+"]']").val()&&(-1!==a("#scriptTag-"+/([0-9]{1,})/.exec(this.id)[0]).val().indexOf(this.value)&&this.value.length>=5?(a(this).addClass("is-valid"),a(this).removeClass("is-invalid"),this.setCustomValidity("")):(a(this).addClass("is-invalid"),a(this).removeClass("is-valid"),this.setCustomValidity("Error")))}))}}(jQuery)});