!function(e){function t(t){for(var r,s,l=t[0],i=t[1],u=t[2],d=0,p=[];d<l.length;d++)s=l[d],n[s]&&p.push(n[s][0]),n[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(c&&c(t);p.length;)p.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,l=1;l<a.length;l++){var i=a[l];0!==n[i]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={0:0},o=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window.webpackJsonp=window.webpackJsonp||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=i;o.push([479,1]),a()}({208:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(a(911)),n=a(87);!function(){var t=a(15).enterModule;t&&t(e)}();var o={MESSAGE:{ERROR:"Please see Debugging in WordPress for more information."},createAttachmentMetadata:function(e,t){return new Promise(function(a,o){r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.WP_MEDIA,{signedUrl:t,file:e}).then(function(e){return a(e)}).catch(function(e){return o(e)})})},addFileToMedia:function(e,t){return new Promise(function(a,o){r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.ADD_FILE_TO_MEDIA,{url:t,file:e}).then(function(e){return a(e)}).catch(function(e){return o(e)})})},getAwsOptions:function(){var e=r.default.create((0,n.AXIOS_CONFIG)()).get(n.API.AWS_OPTIONS);return{type:n.ACTIONS.FETCH_AWS_OPTIONS,payload:e}},updateAwsOptions:function(e){var t=r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.AWS_OPTIONS,e);return{type:n.ACTIONS.UPDATE_AWS_OPTIONS,payload:t}},buildAwsStack:function(e){var t=r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.BUILD_AWS_STACK,e);return{type:n.ACTIONS.BUILD_AWS_STACK,payload:t}},getBuildAwsStackStatus:function(){var e=r.default.create((0,n.AXIOS_CONFIG)()).get(n.API.BUILD_AWS_STACK);return{type:n.ACTIONS.BUILD_AWS_STACK_STATUS,payload:e}},getPluginInfo:function(){var e=r.default.create((0,n.AXIOS_CONFIG)()).get(n.API.GET_PLUGIN_INFO);return{type:n.ACTIONS.GET_PLUGIN_INFO,payload:e}},fileIsExisted:function(e){return r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.S3_FILE,{file_name:e})},listObjects:function(e){return r.default.create((0,n.AXIOS_CONFIG)()).get(n.API.S3_OBJECTS,{params:{prefix:e}})},setObjectAcl:function(e,t){return r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.SET_OBJECT_ACL,{key:e,acl:t})}},s=o;t.default=s,function(){var t=a(15).default,r=a(15).leaveModule;t&&(t.register(o,"WP_API","/root/s3-smart-upload/client/app/app/actions/api.js"),t.register(s,"default","/root/s3-smart-upload/client/app/app/actions/api.js"),r(e))}()}).call(this,a(25)(e))},479:function(e,t,a){a(480),e.exports=a(934)},480:function(e,t,a){"use strict";var r=i(a(0)),n=i(a(9)),o=a(33),s=i(a(488)),l=i(a(508));function i(e){return e&&e.__esModule?e:{default:e}}a(933),document.addEventListener("DOMContentLoaded",function(){n.default.render(r.default.createElement(o.Provider,{store:s.default},r.default.createElement(l.default,null)),document.getElementById("s3-smart-upload-app"))})},488:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=s(a(489)),n=a(24),o=s(a(493));function s(e){return e&&e.__esModule?e:{default:e}}!function(){var t=a(15).enterModule;t&&t(e)}();var l=(0,n.compose)((0,n.applyMiddleware)(r.default))(n.createStore),i=l(o.default),u=i;t.default=u,function(){var t=a(15).default,r=a(15).leaveModule;t&&(t.register(l,"createStoreWithMiddleware","/root/s3-smart-upload/client/app/app/store.js"),t.register(i,"store","/root/s3-smart-upload/client/app/app/store.js"),t.register(u,"default","/root/s3-smart-upload/client/app/app/store.js"),r(e))}()}).call(this,a(25)(e))},493:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=a(24),n=a(935),o=a(159),s=d(a(502)),l=d(a(504)),i=d(a(505)),u=d(a(506)),c=d(a(507));function d(e){return e&&e.__esModule?e:{default:e}}!function(){var t=a(15).enterModule;t&&t(e)}();var p=(0,r.combineReducers)({form:n.reducer,awsOptions:s.default,updateAwsConfigs:l.default,buildAwsStack:i.default,buildAwsStackStatus:u.default,pluginInfo:c.default,toastr:o.reducer}),_=p;t.default=_,function(){var t=a(15).default,r=a(15).leaveModule;t&&(t.register(p,"rootReducer","/root/s3-smart-upload/client/app/app/reducers/index.js"),t.register(_,"default","/root/s3-smart-upload/client/app/app/reducers/index.js"),r(e))}()}).call(this,a(25)(e))},502:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.updateAwsConfigs=i;var n=a(87);!function(){var t=a(15).enterModule;t&&t(e)}();var o={isError:!1,options:{aws_key:"",aws_secret:"",region:"us-west-1"},message:""},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case n.ACTIONS.FETCH_AWS_OPTIONS:return 200===t.payload.status?r({},e,{options:t.payload.data}):r({},e,{isError:!0,message:t.payload.response.data.message});default:return e}};t.default=s;var l=!1;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case n.ACTIONS.UPDATE_AWS_OPTIONS:return 200===t.payload.status?t.payload.data:e;default:return e}}!function(){var t=a(15).default,r=a(15).leaveModule;t&&(t.register(o,"INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_aws_configs.js"),t.register(l,"UPDATE_AWS_INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_aws_configs.js"),t.register(i,"updateAwsConfigs","/root/s3-smart-upload/client/app/app/reducers/reducer_aws_configs.js"),t.register(s,"default","/root/s3-smart-upload/client/app/app/reducers/reducer_aws_configs.js"),r(e))}()}).call(this,a(25)(e))},504:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(87);!function(){var t=a(15).enterModule;t&&t(e)}();var n=!1;function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case r.ACTIONS.UPDATE_AWS_OPTIONS:return 200===t.payload.status||e;default:return e}}!function(){var t=a(15).default,r=a(15).leaveModule;t&&(t.register(n,"UPDATE_AWS_INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_update_aws_configs.js"),t.register(o,"updateAwsConfigs","/root/s3-smart-upload/client/app/app/reducers/reducer_update_aws_configs.js"),r(e))}()}).call(this,a(25)(e))},505:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(87);!function(){var t=a(15).enterModule;t&&t(e)}();var n={};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case r.ACTIONS.BUILD_AWS_STACK:return 200===t.payload.status?t.payload.data:e;default:return e}}!function(){var t=a(15).default,r=a(15).leaveModule;t&&(t.register(n,"UPDATE_AWS_INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_build_aws_stack.js"),t.register(o,"buildAwsStack","/root/s3-smart-upload/client/app/app/reducers/reducer_build_aws_stack.js"),r(e))}()}).call(this,a(25)(e))},506:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(87);!function(){var t=a(15).enterModule;t&&t(e)}();var n={data:{status:"Haven't built yet"}};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case r.ACTIONS.BUILD_AWS_STACK_STATUS:return 200===t.payload.status?t.payload.data:e;default:return e}}!function(){var t=a(15).default,r=a(15).leaveModule;t&&(t.register(n,"UPDATE_AWS_INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_build_aws_stack_status.js"),t.register(o,"buildAwsStack","/root/s3-smart-upload/client/app/app/reducers/reducer_build_aws_stack_status.js"),r(e))}()}).call(this,a(25)(e))},507:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(87);!function(){var t=a(15).enterModule;t&&t(e)}();var n={};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case r.ACTIONS.GET_PLUGIN_INFO:return 200===t.payload.status?t.payload.data:e;default:return e}}!function(){var t=a(15).default,r=a(15).leaveModule;t&&(t.register(n,"INITIAL_STAGE","/root/s3-smart-upload/client/app/app/reducers/reducer_get_plugin_info.js"),t.register(o,"updateAwsConfigs","/root/s3-smart-upload/client/app/app/reducers/reducer_get_plugin_info.js"),r(e))}()}).call(this,a(25)(e))},508:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactReduxToastr=__webpack_require__(159),_reactReduxToastr2=_interopRequireDefault(_reactReduxToastr),_redux=__webpack_require__(24),_reactRedux=__webpack_require__(33),_AWSGuide=__webpack_require__(509),_AWSGuide2=_interopRequireDefault(_AWSGuide),_FileUpload=__webpack_require__(510),_FileUpload2=_interopRequireDefault(_FileUpload),_api=__webpack_require__(208),_api2=_interopRequireDefault(_api);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(){var e=__webpack_require__(15).enterModule;e&&e(module)}();var Root=function(_Component){function Root(){return _classCallCheck(this,Root),_possibleConstructorReturn(this,(Root.__proto__||Object.getPrototypeOf(Root)).apply(this,arguments))}return _inherits(Root,_Component),_createClass(Root,[{key:"componentWillMount",value:function(){var e=this,t=this.props.getPluginInfo;this.setState({loading:!0}),t().then(function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=_react2.default.createElement("div",{className:"ssu-loading"},"Loading data..."),t=this.state.loading,a=this.props.pluginInfo,r=a.awsConfigured?_react2.default.createElement(_FileUpload2.default,{pluginInfo:a}):_react2.default.createElement(_AWSGuide2.default,null),n=t?e:r;return _react2.default.createElement("div",null,_react2.default.createElement(_reactReduxToastr2.default,{timeOut:4e3,newestOnTop:!1,preventDuplicates:!0,position:"top-right",transitionIn:"fadeIn",transitionOut:"fadeOut",progressBar:!0,closeOnToastrClick:!0}),_react2.default.createElement("h2",null,window.ssuData.plugin_name),n)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Root}(_react.Component),mapStateToProps=function(e){return{pluginInfo:e.pluginInfo}},mapActionsToProps=function(e){return(0,_redux.bindActionCreators)({getPluginInfo:_api2.default.getPluginInfo},e)},_default=(0,_reactRedux.connect)(mapStateToProps,mapActionsToProps)(Root);exports.default=_default,function(){var e=__webpack_require__(15).default,t=__webpack_require__(15).leaveModule;e&&(e.register(Root,"Root","/root/s3-smart-upload/client/app/app/config/Root.js"),e.register(mapStateToProps,"mapStateToProps","/root/s3-smart-upload/client/app/app/config/Root.js"),e.register(mapActionsToProps,"mapActionsToProps","/root/s3-smart-upload/client/app/app/config/Root.js"),e.register(_default,"default","/root/s3-smart-upload/client/app/app/config/Root.js"),t(module))}()}).call(this,__webpack_require__(25)(module))},509:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(a(0));!function(){var t=a(15).enterModule;t&&t(e)}();var n=function(){return r.default.createElement("div",{className:"ssu-aws-guide"},r.default.createElement("strong",null,"Define access keys in wp-config.php"),r.default.createElement("p",null,"Copy the following snippet near the top of your wp-config.php and replace your ",r.default.createElement("a",{target:"_blank",rel:"noopener",href:"https://preventdirectaccess.com/docs/upload-wordpress-files-directly-to-amazon-s3-bucket/"},"AWS access keys")," or ",r.default.createElement("a",{target:"_blank",rel:"noopener",href:"https://preventdirectaccess.com/docs/create-wasabi-bucket-get-access-keys/"},"Wasabi access keys")," accordingly. Once done, refresh this page and start uploading files to Wasabi cloud storage. "),r.default.createElement("div",null,r.default.createElement("textarea",{rows:"7",cols:"50"},["define('SSU_PROVIDER', 'aws'); // put either aws or wasabi","define('SSU_KEY', 'your-access-key');","define('SSU_SECRET', 'your-access-secret');","define('SSU_BUCKET', 'your-bucket');","define('SSU_FOLDER', 'your-bucket-folder'); // optional","define('SSU_REGION', 'your-bucket-region');","define('SSU_SURL_EXPIRY', 60); // in seconds","define('SSU_CAPABILITY', 'manage_options'); // optional"].join("\n"))))},o=n;t.default=o,function(){var t=a(15).default,r=a(15).leaveModule;t&&(t.register(n,"AWSGuide","/root/s3-smart-upload/client/app/app/components/AWSGuide.js"),t.register(o,"default","/root/s3-smart-upload/client/app/app/components/AWSGuide.js"),r(e))}()}).call(this,a(25)(e))},510:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactS3Uploader=__webpack_require__(511),_reactS3Uploader2=_interopRequireDefault(_reactS3Uploader),_reactReduxToastr=__webpack_require__(159),_antd=__webpack_require__(450),_TreeFolder=__webpack_require__(910),_TreeFolder2=_interopRequireDefault(_TreeFolder),_api=__webpack_require__(208),_api2=_interopRequireDefault(_api),_uploadStage=__webpack_require__(930),_uploadStage2=_interopRequireDefault(_uploadStage),_index=__webpack_require__(931),_fileUtil=__webpack_require__(932),_fileUtil2=_interopRequireDefault(_fileUtil);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(){var e=__webpack_require__(15).enterModule;e&&e(module)}();var FileUpload=function(_React$Component){function FileUpload(e){_classCallCheck(this,FileUpload);var t=_possibleConstructorReturn(this,(FileUpload.__proto__||Object.getPrototypeOf(FileUpload)).call(this,e));return t.preprocess=t.preprocess.bind(t),t.onFinish=t.onFinish.bind(t),t.showUploadResult=t.showUploadResult.bind(t),t.onProgress=t.onProgress.bind(t),t.onError=t.onError.bind(t),t.handleInputChange=t.handleInputChange.bind(t),t.changeACL=t.changeACL.bind(t),t.state={currentFile:null,error:null,result:null,process:{stage:"",message:""},refreshTreeFolder:!1,isAddToMedia:!1,grantPublicACL:!1},t}return _inherits(FileUpload,_React$Component),_createClass(FileUpload,[{key:"onProgress",value:function(e){var t=this.state,a=t.process,r=a.stage;_uploadStage2.default.uploading.label===a.stage&&this.setState.apply(this,_toConsumableArray(t).concat([{process:{stage:r,message:"Uploading process: "+e+"%"}}]))}},{key:"onError",value:function(e){this.setState({error:e,process:{stage:_uploadStage2.default.uploaded.label,message:""}}),_reactReduxToastr.toastr.error(_api2.default.MESSAGE.ERROR)}},{key:"onFinish",value:function(e){var t=this,a=this.state,r=this.state,n=r.currentFile;r.isAddToMedia?_api2.default.createAttachmentMetadata(n,e.signedUrl).catch(function(e){return console.log(e)}).finally(function(){t.setState.apply(t,_toConsumableArray(a).concat([{result:e,process:{stage:_uploadStage2.default.finished.label,message:_uploadStage2.default.finished.message}}]))}):this.setState.apply(this,_toConsumableArray(a).concat([{result:e,process:{stage:_uploadStage2.default.finished.label,message:_uploadStage2.default.finished.message}}]))}},{key:"getSizeForImage",value:function(e){var t=this,a=this.state,r=URL.createObjectURL(e),n=new Image;n.onload=function(){t.setState.apply(t,_toConsumableArray(a).concat([{currentFile:{name:e.name,size:e.size,width:n.width,height:n.height}}]))},n.src=r}},{key:"preprocess",value:function(e,t){var a=this,r=this.state;this.setState.apply(this,_toConsumableArray(r).concat([{process:{stage:"",message:""}}])),_fileUtil2.default.isAllowedFileSize(e)?_api2.default.fileIsExisted(e.name).then(function(n){var o=e;if(n.data){var s=e.name.split("."),l=s.pop(),i=Math.round((new Date).getTime()/1e3);s.push(i);var u=s.join("-")+"."+l;o=new File([e],u,{type:e.type})}o.type.match(/image\/*/)?a.getSizeForImage(o):a.setState.apply(a,_toConsumableArray(r).concat([{currentFile:{name:o.name,size:o.size}}])),a.setState.apply(a,_toConsumableArray(r).concat([{process:{stage:_uploadStage2.default.uploading.label,message:_uploadStage2.default.uploading.message}}])),t(o)}).catch(function(e){return console.error(e)}):_reactReduxToastr.toastr.warning(_index.MESSAGE.SSU_FILE_MAX_FILE_ERROR)}},{key:"showUploadResult",value:function(){var e=this.state.process;if(e.stage===_uploadStage2.default.finished.label){var t=this.state.currentFile;return _react2.default.createElement("div",{className:"file-info"},_react2.default.createElement("div",null,_index.MESSAGE.SSU_SUCCESS_TO_UPLOAD_FILE),_react2.default.createElement("div",null,"File name: ",_react2.default.createElement("strong",{className:"name"},t.name)),_react2.default.createElement("div",null,"File size:",_react2.default.createElement("strong",{className:"name"}," ",t.size," bytes")))}return _react2.default.createElement("div",{className:"upload-status"},_react2.default.createElement("div",null,e.message))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value;this.setState({isAddToMedia:a})}},{key:"changeACL",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value;this.setState({grantPublicACL:a})}},{key:"getUploadRequestHeaders",value:function(e){var t={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","X-WP-Nonce":window.ssuData.nonce};return"aws"===window.ssuData.provider?t.ACL=e?"public-read":"private":"wasabi"===window.ssuData.provider&&(t["x-amz-acl"]=e?"public-read":"private"),t}},{key:"render",value:function(){var e=this.state,t=e.process,a=e.isAddToMedia,r=e.grantPublicACL,n=this.props.pluginInfo;return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"ssu-main"},_react2.default.createElement(_antd.Row,null,_react2.default.createElement(_antd.Col,{span:8},_react2.default.createElement("h3",null,"Upload this file to ",(0,_index.getProviderName)()),_react2.default.createElement("div",{className:"ssu-uploader s3-file-input upload-btn-wrapper"},_react2.default.createElement(_reactS3Uploader2.default,{signingUrl:window.ssuData.home_url+"ssu/v1/s3/sign",signingUrlMethod:"GET",accept:"*",preprocess:this.preprocess,onError:this.onError,onProgress:this.onProgress,onFinish:this.onFinish,uploadRequestHeaders:this.getUploadRequestHeaders(r),signingUrlHeaders:{"ssu-public-acl":r},contentDisposition:"auto",scrubFilename:function(e){return encodeURIComponent(e)}})),_react2.default.createElement("div",{style:{margin:"0.5rem 0px 1rem"}},_react2.default.createElement("label",{htmlFor:"isAddToMedia"},_react2.default.createElement("input",{id:"isAddToMedia",name:"isAddToMedia",type:"checkbox",checked:a,onChange:this.handleInputChange}),"Show it under Media Library")),_react2.default.createElement("div",{style:{margin:"0.5rem 0px 1rem"}},_react2.default.createElement("label",{htmlFor:"grantPublicACL"},_react2.default.createElement("input",{id:"grantPublicACL",name:"grantPublicACL",type:"checkbox",checked:r,onChange:this.changeACL}),"Make it public")),_react2.default.createElement("div",{className:"ssu-result"},this.showUploadResult())),_react2.default.createElement(_antd.Col,{span:12},_react2.default.createElement("h3",{style:{marginBottom:"0.5rem"}},(0,_index.getProviderName)()," Bucket Folder Structure"),_react2.default.createElement("i",{style:{marginBottom:"1.5rem",fontStyle:"italic",display:"block"}},"Right click on the file to either copy its URL or show it under Media Library "),_react2.default.createElement("div",null,"Upload to ",_react2.default.createElement("code",null,n.prefixKey.length>0?""+n.prefixKey:"root")," directory"),_react2.default.createElement(_TreeFolder2.default,{refresh:t.stage===_uploadStage2.default.finished.label,hostname:n.s3Hostname})))))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),FileUpload}(_react2.default.Component),_default=FileUpload;exports.default=_default,function(){var e=__webpack_require__(15).default,t=__webpack_require__(15).leaveModule;e&&(e.register(FileUpload,"FileUpload","/root/s3-smart-upload/client/app/app/components/FileUpload.js"),e.register(_default,"default","/root/s3-smart-upload/client/app/app/components/FileUpload.js"),t(module))}()}).call(this,__webpack_require__(25)(module))},574:function(e,t,a){var r={"./af":244,"./af.js":244,"./ar":245,"./ar-dz":246,"./ar-dz.js":246,"./ar-kw":247,"./ar-kw.js":247,"./ar-ly":248,"./ar-ly.js":248,"./ar-ma":249,"./ar-ma.js":249,"./ar-sa":250,"./ar-sa.js":250,"./ar-tn":251,"./ar-tn.js":251,"./ar.js":245,"./az":252,"./az.js":252,"./be":253,"./be.js":253,"./bg":254,"./bg.js":254,"./bm":255,"./bm.js":255,"./bn":256,"./bn.js":256,"./bo":257,"./bo.js":257,"./br":258,"./br.js":258,"./bs":259,"./bs.js":259,"./ca":260,"./ca.js":260,"./cs":261,"./cs.js":261,"./cv":262,"./cv.js":262,"./cy":263,"./cy.js":263,"./da":264,"./da.js":264,"./de":265,"./de-at":266,"./de-at.js":266,"./de-ch":267,"./de-ch.js":267,"./de.js":265,"./dv":268,"./dv.js":268,"./el":269,"./el.js":269,"./en-SG":270,"./en-SG.js":270,"./en-au":271,"./en-au.js":271,"./en-ca":272,"./en-ca.js":272,"./en-gb":273,"./en-gb.js":273,"./en-ie":274,"./en-ie.js":274,"./en-il":275,"./en-il.js":275,"./en-nz":276,"./en-nz.js":276,"./eo":277,"./eo.js":277,"./es":278,"./es-do":279,"./es-do.js":279,"./es-us":280,"./es-us.js":280,"./es.js":278,"./et":281,"./et.js":281,"./eu":282,"./eu.js":282,"./fa":283,"./fa.js":283,"./fi":284,"./fi.js":284,"./fo":285,"./fo.js":285,"./fr":286,"./fr-ca":287,"./fr-ca.js":287,"./fr-ch":288,"./fr-ch.js":288,"./fr.js":286,"./fy":289,"./fy.js":289,"./ga":290,"./ga.js":290,"./gd":291,"./gd.js":291,"./gl":292,"./gl.js":292,"./gom-latn":293,"./gom-latn.js":293,"./gu":294,"./gu.js":294,"./he":295,"./he.js":295,"./hi":296,"./hi.js":296,"./hr":297,"./hr.js":297,"./hu":298,"./hu.js":298,"./hy-am":299,"./hy-am.js":299,"./id":300,"./id.js":300,"./is":301,"./is.js":301,"./it":302,"./it-ch":303,"./it-ch.js":303,"./it.js":302,"./ja":304,"./ja.js":304,"./jv":305,"./jv.js":305,"./ka":306,"./ka.js":306,"./kk":307,"./kk.js":307,"./km":308,"./km.js":308,"./kn":309,"./kn.js":309,"./ko":310,"./ko.js":310,"./ku":311,"./ku.js":311,"./ky":312,"./ky.js":312,"./lb":313,"./lb.js":313,"./lo":314,"./lo.js":314,"./lt":315,"./lt.js":315,"./lv":316,"./lv.js":316,"./me":317,"./me.js":317,"./mi":318,"./mi.js":318,"./mk":319,"./mk.js":319,"./ml":320,"./ml.js":320,"./mn":321,"./mn.js":321,"./mr":322,"./mr.js":322,"./ms":323,"./ms-my":324,"./ms-my.js":324,"./ms.js":323,"./mt":325,"./mt.js":325,"./my":326,"./my.js":326,"./nb":327,"./nb.js":327,"./ne":328,"./ne.js":328,"./nl":329,"./nl-be":330,"./nl-be.js":330,"./nl.js":329,"./nn":331,"./nn.js":331,"./pa-in":332,"./pa-in.js":332,"./pl":333,"./pl.js":333,"./pt":334,"./pt-br":335,"./pt-br.js":335,"./pt.js":334,"./ro":336,"./ro.js":336,"./ru":337,"./ru.js":337,"./sd":338,"./sd.js":338,"./se":339,"./se.js":339,"./si":340,"./si.js":340,"./sk":341,"./sk.js":341,"./sl":342,"./sl.js":342,"./sq":343,"./sq.js":343,"./sr":344,"./sr-cyrl":345,"./sr-cyrl.js":345,"./sr.js":344,"./ss":346,"./ss.js":346,"./sv":347,"./sv.js":347,"./sw":348,"./sw.js":348,"./ta":349,"./ta.js":349,"./te":350,"./te.js":350,"./tet":351,"./tet.js":351,"./tg":352,"./tg.js":352,"./th":353,"./th.js":353,"./tl-ph":354,"./tl-ph.js":354,"./tlh":355,"./tlh.js":355,"./tr":356,"./tr.js":356,"./tzl":357,"./tzl.js":357,"./tzm":358,"./tzm-latn":359,"./tzm-latn.js":359,"./tzm.js":358,"./ug-cn":360,"./ug-cn.js":360,"./uk":361,"./uk.js":361,"./ur":362,"./ur.js":362,"./uz":363,"./uz-latn":364,"./uz-latn.js":364,"./uz.js":363,"./vi":365,"./vi.js":365,"./x-pseudo":366,"./x-pseudo.js":366,"./yo":367,"./yo.js":367,"./zh-cn":368,"./zh-cn.js":368,"./zh-hk":369,"./zh-hk.js":369,"./zh-tw":370,"./zh-tw.js":370};function n(e){var t=o(e);return a(t)}function o(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id=574},87:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),function(){var t=a(15).enterModule;t&&t(e)}();var r=window.ssuData.home_url,n=t.AXIOS_CONFIG=function(){return{baseURL:r+"ssu/v1/",timeout:1e4,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","X-WP-Nonce":window.ssuData.nonce}}},o=t.API={WP_MEDIA:"wp-media",ADD_FILE_TO_MEDIA:"add-file-to-media",AWS_OPTIONS:"aws-options",BUILD_AWS_STACK:"api-stack",GET_PLUGIN_INFO:"plugin",S3_FILE:"s3",S3_OBJECTS:"s3/objects",SET_OBJECT_ACL:"s3/object/acl"},s=t.ACTIONS={FETCH_AWS_OPTIONS:"FETCH_AWS_OPTIONS",UPDATE_AWS_OPTIONS:"UPDATE_AWS_OPTIONS",BUILD_AWS_STACK:"BUILD_AWS_STACK",BUILD_AWS_STACK_STATUS:"BUILD_AWS_STACK_STATUS",GET_PLUGIN_INFO:"GET_PLUGIN_INFO",S3_FILE:"S3_FILE"};!function(){var t=a(15).default,l=a(15).leaveModule;t&&(t.register(r,"rootDomain","/root/s3-smart-upload/client/app/app/actions/configs.js"),t.register(n,"AXIOS_CONFIG","/root/s3-smart-upload/client/app/app/actions/configs.js"),t.register(o,"API","/root/s3-smart-upload/client/app/app/actions/configs.js"),t.register(s,"ACTIONS","/root/s3-smart-upload/client/app/app/actions/configs.js"),l(e))}()}).call(this,a(25)(e))},910:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_antd=__webpack_require__(450),_copyToClipboard=__webpack_require__(213),_copyToClipboard2=_interopRequireDefault(_copyToClipboard),_api=__webpack_require__(208),_api2=_interopRequireDefault(_api);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function getDisplayFolder(){return window.ssuData&&window.ssuData.display_folder?window.ssuData.display_folder:""}!function(){var e=__webpack_require__(15).enterModule;e&&e(module)}();var DirectoryTree=_antd.Tree.DirectoryTree,TreeNode=_antd.Tree.TreeNode,TreeFolder=function(_React$Component){function TreeFolder(e){_classCallCheck(this,TreeFolder);var t=_possibleConstructorReturn(this,(TreeFolder.__proto__||Object.getPrototypeOf(TreeFolder)).call(this,e));return t.onLoadData=function(e){return new Promise(function(a){e.props.children?a():t.loadFolder(e.props.dataRef.key).then(function(r){e.props.dataRef.children=r;var n=t.state.treeData;t.setState({treeData:[].concat(_toConsumableArray(n))}),a()})})},t.onRightClick=function(e){var a=e.node;a.props.isLeaf&&t.setState({visible:!0,key:a.props.dataRef.key})},t.maybeFetchFolder=function(){t.state.isShowRoot?t.fetchFolder():t.fetchFolder(getDisplayFolder())},t.loadFolder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise(function(t,a){_api2.default.listObjects(e).then(function(a){var r=a.data.result,n=r.CommonPrefixes,o=r.Contents,s=[];n&&n.length>0&&n.forEach(function(t){0!==t.Prefix.localeCompare(e)&&s.push({key:t.Prefix,title:t.Prefix.replace(e,"")})}),o&&o.length>0&&o.forEach(function(t){0!==t.Key.localeCompare(e)&&s.push({key:t.Key,title:t.Key.replace(e,""),isLeaf:!0})}),t(s)}).catch(function(e){a(e),_antd.notification.error({message:_api2.default.MESSAGE.ERROR})})})},t.handleCancel=function(){t.setState({visible:!1})},t.generateURL=function(e,t){var a=t.split("/"),r=encodeURIComponent(a.pop());return a.push(r),""+e+a.join("/")},t.clickToCopy=function(){var e=t.props.hostname,a=t.state.key,r=t.generateURL(e,a);(0,_copyToClipboard2.default)(r),_antd.notification.success({message:"Copy the S3 URL successfully"}),t.setState({visible:!1})},t.addToMedia=function(){var e=t.props.hostname,a=t.state.key,r=t.generateURL(e,a);t.setState({loadingAddMedia:!0}),_api2.default.addFileToMedia(a,r).then(function(){_antd.notification.success({message:"Add S3 file to media successfully"})}).catch(function(e){var t=_api2.default.MESSAGE.ERROR;e.response.data&&e.response.data.result&&(t=e.response.data.result),_antd.notification.error({message:t})}).finally(function(){t.setState({loadingAddMedia:!1,visible:!1})})},t.makePublic=function(){t.setState({loading:!0});var e=t.state.key;_api2.default.setObjectAcl(e,"public-read").then(function(){_antd.notification.success({message:"Success to make file "+e+" public"})}).catch(function(e){console.log("Make Public Error",e),_antd.notification.error({message:_api2.default.MESSAGE.ERROR})}).finally(function(){t.setState({loading:!1,visible:!1})})},t.fetchFolder=function(e){t.setState({loading:!0}),t.loadFolder(e).then(function(e){t.setState({treeData:e})}).finally(function(){return t.setState({loading:!1})})},t.handleShowRoot=function(e){var a=e.target;t.setState({isShowRoot:a.checked},function(){return t.maybeFetchFolder()})},t.renderTreeNodes=function(e){return e.map(function(e){return e.children?_react2.default.createElement(TreeNode,{title:e.title,key:e.key,dataRef:e},t.renderTreeNodes(e.children)):_react2.default.createElement(TreeNode,_extends({key:e.key},e,{dataRef:e}))})},t.makePublic=t.makePublic.bind(t),t.state={treeData:[],loading:!0,visible:!1,key:null,loadingAddMedia:!1,isShowRoot:""===getDisplayFolder()},t}return _inherits(TreeFolder,_React$Component),_createClass(TreeFolder,[{key:"componentDidMount",value:function(){this.maybeFetchFolder()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.refresh;e.refresh!==t&&this.maybeFetchFolder()}},{key:"render",value:function(){var e=this.state,t=e.treeData,a=e.loading,r=e.visible,n=e.loadingAddMedia,o=e.isShowRoot,s=""!==getDisplayFolder()?_react2.default.createElement("label",{htmlFor:"isShowRoot",style:{textAlign:"right",display:"block"}},_react2.default.createElement("input",{id:"isShowRoot",name:"isShowRoot",type:"checkbox",checked:o,onChange:this.handleShowRoot}),"Show other directories under this bucket"):"";return a?_react2.default.createElement("div",null,s,_react2.default.createElement("div",{style:{textAlign:"center",marginTop:"0.5rem"}},"Loading...")):_react2.default.createElement("div",null,s,_react2.default.createElement(_antd.Card,{bordered:!0,style:{marginTop:"0.5rem"}},_react2.default.createElement(DirectoryTree,{loading:!0,multiple:!0,loadData:this.onLoadData,showLine:!0,onRightClick:this.onRightClick},this.renderTreeNodes(t)),_react2.default.createElement(_antd.Modal,{title:"",visible:r,footer:null,onCancel:this.handleCancel},_react2.default.createElement("div",{style:{textAlign:"center"}},_react2.default.createElement(_antd.Button,{onClick:this.clickToCopy},"Copy File URL to Clipboard")),_react2.default.createElement("div",{style:{textAlign:"center",marginTop:"5px"}},_react2.default.createElement(_antd.Button,{disabled:n,loading:n,onClick:this.addToMedia},"Add to Media Library")),_react2.default.createElement("div",{style:{textAlign:"center",marginTop:"5px"}},_react2.default.createElement(_antd.Button,{onClick:this.makePublic},"Make File Public")))))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),TreeFolder}(_react2.default.Component),_default=TreeFolder;exports.default=_default,function(){var e=__webpack_require__(15).default,t=__webpack_require__(15).leaveModule;e&&(e.register(getDisplayFolder,"getDisplayFolder","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),e.register(DirectoryTree,"DirectoryTree","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),e.register(TreeNode,"TreeNode","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),e.register(TreeFolder,"TreeFolder","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),e.register(_default,"default","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),t(module))}()}).call(this,__webpack_require__(25)(module))},930:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),function(){var t=a(15).enterModule;t&&t(e)}();var r={uploading:{label:"Uploading",message:"Uploading the file..."},uploaded:{label:"Uploaded",message:"Success to upload the file to S3. Generating the metadata..."},finished:{label:"Finished",message:""}},n=r;t.default=n,function(){var t=a(15).default,o=a(15).leaveModule;t&&(t.register(r,"UploadStage","/root/s3-smart-upload/client/app/app/helpers/upload-stage.js"),t.register(n,"default","/root/s3-smart-upload/client/app/app/helpers/upload-stage.js"),o(e))}()}).call(this,a(25)(e))},931:function(e,t,a){"use strict";t.getProviderName=function(){switch(window.ssuData.provider){case"aws":return"S3";case"wasabi":return"Wasabi";default:return"S3"}},t.MESSAGE=window.ssuData.messages},932:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),function(){var t=a(15).enterModule;t&&t(e)}();var r=function(e){if(window.ssuData&&!window.ssuData.enable_restriction)return!0;return e.size<=1e6*window.ssuData.max_file_size},n={isAllowedFileSize:r};t.default=n,function(){var t=a(15).default,o=a(15).leaveModule;t&&(t.register(r,"isAllowedFileSize","/root/s3-smart-upload/client/app/common/fileUtil.js"),t.register(n,"default","/root/s3-smart-upload/client/app/common/fileUtil.js"),o(e))}()}).call(this,a(25)(e))},933:function(e,t){},934:function(e,t){}});
//# sourceMappingURL=main.ssu.js.map